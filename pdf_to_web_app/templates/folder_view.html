{% extends "base.html" %}

{% block title %}Contenido de: {{ current_path }}{% endblock %}

{% block content %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb p-3 rounded">
            <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Inicio</a></li>
            {% set path_parts = current_path.split('/') %}
            {% for i in range(path_parts|length) %}
                {% set item_path = '/'.join(path_parts[:i+1]) %}
                {% if not loop.last %}
                    <li class="breadcrumb-item"><a href="{{ url_for('view_content', path=item_path) }}">{{ path_parts[i] }}</a></li>
                {% else %}
                    <li class="breadcrumb-item active" aria-current="page">{{ path_parts[i] }}</li>
                {% endif %}
            {% endfor %}
        </ol>
    </nav>

    <h1 class="mb-4">Contenido de: {{ current_path.split('/')[-1] }}</h1>
    
    <div class="list-group">
        {% if folders %}
            <h5 class="mt-4">Subcarpetas</h5>
            {% for folder in folders %}
                <a href="{{ url_for('view_content', path=current_path ~ '/' ~ folder) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-folder-fill me-2"></i>{{ folder }}</span>
                    <i class="bi bi-chevron-right"></i>
                </a>
            {% endfor %}
        {% endif %}

        {% if files %}
            <h5 class="mt-4">Archivos</h5>
            {% for file in files %}
                <a href="{{ url_for('view_content', path=current_path ~ '/' ~ file) }}" class="list-group-item list-group-item-action">
                    <i class="bi bi-file-earmark-text-fill me-2"></i>{{ file.replace('.txt', '.pdf') }}
                </a>
            {% endfor %}
        {% endif %}

        {% if not folders and not files %}
            <div class="alert alert-secondary">Esta carpeta está vacía.</div>
        {% endif %}
    </div>
{% endblock %}