<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Cheatsheet - Comandos y Shell</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Google Fonts - Fuentes futuristas -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/site.css">
    <style>
        .linux-map-shell {
            border: 1px solid #d6e3f3;
            border-radius: 1rem;
            background: linear-gradient(160deg, #ffffff 0%, #f2f7ff 100%);
            padding: 1rem;
            box-shadow: 0 14px 24px rgba(15, 32, 58, 0.08);
        }
        .linux-map-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 0.55rem;
            align-items: center;
            margin-bottom: 0.85rem;
        }
        .linux-map-search {
            flex: 1 1 280px;
            min-width: 240px;
            border: 1px solid #bcd2eb;
            border-radius: 0.75rem;
            padding: 0.55rem 0.75rem;
            font-family: 'JetBrains Mono', monospace;
            color: #133353;
            background: #ffffff;
        }
        .linux-map-search:focus-visible {
            outline: 2px solid #2b6cb0;
            outline-offset: 2px;
        }
        .linux-map-btn {
            border: 1px solid #2b6cb0;
            background: #ffffff;
            color: #1b4f82;
            border-radius: 0.65rem;
            padding: 0.45rem 0.72rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.82rem;
            font-weight: 700;
            transition: all 0.2s ease;
        }
        .linux-map-btn:hover {
            background: #2b6cb0;
            color: #ffffff;
            transform: translateY(-1px);
        }
        .linux-map-tree {
            max-height: 560px;
            overflow: auto;
            padding-right: 0.25rem;
        }
        .linux-map-tree .linux-map-node {
            margin-left: 0.65rem;
            margin-bottom: 0.2rem;
            padding-left: 0.7rem;
            border-left: 2px solid #cfdeef;
        }
        .linux-map-tree summary {
            list-style: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.34rem 0.5rem;
            border-radius: 0.55rem;
        }
        .linux-map-tree summary::-webkit-details-marker {
            display: none;
        }
        .linux-map-tree summary::before {
            content: "▸";
            color: #24548a;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
        }
        .linux-map-tree details[open] > summary::before {
            content: "▾";
        }
        .linux-map-label {
            color: #123f6c;
            font-weight: 700;
            text-transform: none;
            letter-spacing: 0;
        }
        .linux-map-count {
            margin-left: auto;
            background: #dcecff;
            color: #164a7b;
            border-radius: 999px;
            padding: 0.1rem 0.45rem;
            font-size: 0.73rem;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
        }
        .linux-map-leaf {
            margin-left: 1.75rem;
            margin-bottom: 0.2rem;
            border-left: 2px solid #dde7f3;
            border-radius: 0.5rem;
            padding: 0.26rem 0.5rem;
            color: #2c4158;
            font-family: 'Space Mono', monospace;
            font-size: 0.88rem;
        }
        .linux-map-match > summary,
        .linux-map-leaf.linux-map-match {
            background: #fff2b7;
            border: 1px solid #ebd67b;
        }
        .linux-map-hidden {
            display: none !important;
        }
        .linux-map-tip {
            margin-top: 0.65rem;
            color: #36516e;
            font-size: 0.85rem;
        }
        @media (max-width: 767.98px) {
            .linux-map-tree {
                max-height: 440px;
            }
            .linux-map-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="linux-penguin-intro" aria-hidden="true">
        <div class="linux-penguin-char">&#128039;</div>
        <div class="linux-penguin-bubble">tira windows a la mierda!</div>
    </div>

    <!-- Navbar Neón -->
    <div class="hero text-center">
        <h1 class="display-4 fw-bold"><i class="bi bi-terminal"></i> Linux Cheatsheet</h1>
        <p class="lead">Comandos esenciales, shell, permisos, expresiones regulares y más.</p>
    </div>

    <div class="container py-5">
        <!-- Aviso: redirección a guía de redes -->
        <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="bi bi-info-circle-fill me-2 fs-4"></i>
            <div>Para temas de <strong>redes (subnetting, DHCP, DNS)</strong> visita la <a href="guia_redes.html" class="alert-link">Guía de Redes</a>.</div>
        </div>

        <h2 class="section-title" id="linux-mind-map"><i class="bi bi-diagram-3"></i> Mapa mental dinámico</h2>
        <div class="linux-map-shell mb-4">
            <div class="linux-map-toolbar">
                <input type="search" id="linuxMapSearch" class="linux-map-search" placeholder="Buscar comando, tema o fichero..." aria-label="Buscar en el mapa mental de Linux">
                <button type="button" id="linuxMapExpand" class="linux-map-btn">Expandir todo</button>
                <button type="button" id="linuxMapCollapse" class="linux-map-btn">Colapsar ramas</button>
                <button type="button" id="linuxMapReset" class="linux-map-btn">Limpiar filtro</button>
            </div>
            <div id="linuxMindMap" class="linux-map-tree" role="tree" aria-label="Mapa mental de Linux"></div>
            <p class="linux-map-tip mb-0"><i class="bi bi-lightbulb"></i> Tip: escribe en el buscador para filtrar nodos y abrir las ramas relacionadas.</p>
        </div>

        <!-- Navegación y archivos -->
        <h2 class="section-title"><i class="bi bi-folder2-open"></i> Navegación y archivos</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">ls</span> listar directorio</li>
                    <li><span class="badge-cmd">cd</span> cambiar directorio</li>
                    <li><span class="badge-cmd">pwd</span> directorio actual</li>
                    <li><span class="badge-cmd">cp</span> copiar</li>
                    <li><span class="badge-cmd">mv</span> mover/renombrar</li>
                    <li><span class="badge-cmd">rm</span> eliminar</li>
                    <li><span class="badge-cmd">mkdir</span> crear directorio</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">rmdir</span> eliminar directorio vacío</li>
                    <li><span class="badge-cmd">touch</span> crear archivo vacío</li>
                    <li><span class="badge-cmd">find</span> buscar archivos</li>
                    <li><span class="badge-cmd">locate</span> buscar en base de datos</li>
                    <li><span class="badge-cmd">which</span> ubicación de ejecutable</li>
                    <li><span class="badge-cmd">tree</span> mostrar árbol de directorios</li>
                </ul>
            </div>
        </div>

        <!-- Visualización de archivos -->
        <h2 class="section-title"><i class="bi bi-file-earmark-text"></i> Visualización de archivos</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">cat</span> concatenar y mostrar</li>
                    <li><span class="badge-cmd">less</span> paginar avanzado</li>
                    <li><span class="badge-cmd">more</span> paginar básico</li>
                    <li><span class="badge-cmd">head</span> primeras líneas</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">tail</span> últimas líneas</li>
                    <li><span class="badge-cmd">nano</span> editor simple</li>
                    <li><span class="badge-cmd">vim</span> editor avanzado</li>
                    <li><span class="badge-cmd">echo/printf</span> mostrar texto</li>
                </ul>
            </div>
        </div>

        <!-- Procesos -->
        <h2 class="section-title"><i class="bi bi-cpu"></i> Gestión de procesos</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">ps</span> lista de procesos</li>
                    <li><span class="badge-cmd">top</span> monitor interactivo</li>
                    <li><span class="badge-cmd">htop</span> top mejorado</li>
                    <li><span class="badge-cmd">kill</span> terminar por PID</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">killall</span> terminar por nombre</li>
                    <li><span class="badge-cmd">pkill</span> terminar por patrón</li>
                    <li><span class="badge-cmd">bg/fg/jobs</span> control de trabajos</li>
                    <li><span class="badge-cmd">nice/renice</span> prioridad</li>
                </ul>
            </div>
        </div>

        <!-- Sistema e información -->
        <h2 class="section-title"><i class="bi bi-info-circle"></i> Sistema e información</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">uname -a</span> info del kernel</li>
                    <li><span class="badge-cmd">hostname</span> nombre del equipo</li>
                    <li><span class="badge-cmd">uptime</span> tiempo encendido</li>
                    <li><span class="badge-cmd">whoami</span> usuario actual</li>
                    <li><span class="badge-cmd">id</span> identidad del usuario</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">date</span> fecha/hora</li>
                    <li><span class="badge-cmd">cal</span> calendario</li>
                    <li><span class="badge-cmd">df -h</span> espacio en discos</li>
                    <li><span class="badge-cmd">du -sh</span> uso de disco</li>
                    <li><span class="badge-cmd">free -h</span> memoria RAM</li>
                </ul>
            </div>
        </div>

        <!-- Red (comandos básicos) -->
        <h2 class="section-title"><i class="bi bi-hdd-network"></i> Comandos de red</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">ping</span> prueba conectividad</li>
                    <li><span class="badge-cmd">ip a</span> mostrar interfaces</li>
                    <li><span class="badge-cmd">ip route</span> tabla de rutas</li>
                    <li><span class="badge-cmd">ss -tulnp</span> puertos escuchando</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">traceroute</span> ruta de paquetes</li>
                    <li><span class="badge-cmd">nslookup</span> consulta DNS</li>
                    <li><span class="badge-cmd">dig</span> consulta DNS detallada</li>
                    <li><span class="badge-cmd">curl/wget</span> transferir datos</li>
                </ul>
            </div>
        </div>

        <!-- Permisos y usuarios -->
        <h2 class="section-title"><i class="bi bi-shield-lock"></i> Permisos y usuarios</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">chmod</span> cambiar permisos</li>
                    <li><span class="badge-cmd">chown</span> cambiar propietario</li>
                    <li><span class="badge-cmd">chgrp</span> cambiar grupo</li>
                    <li><span class="badge-cmd">umask</span> máscara por defecto</li>
                    <li><span class="badge-cmd">useradd/usermod/userdel</span> gestión usuarios</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">passwd</span> cambiar contraseña</li>
                    <li><span class="badge-cmd">su</span> cambiar de usuario</li>
                    <li><span class="badge-cmd">sudo</span> ejecutar como otro</li>
                    <li><span class="badge-cmd">visudo</span> editar sudoers</li>
                    <li><span class="badge-cmd">groups</span> grupos del usuario</li>
                </ul>
            </div>
        </div>

        <!-- Discos y particiones -->
        <h2 class="section-title"><i class="bi bi-hdd"></i> Discos y particiones</h2>
        <ul class="command-list">
            <li><span class="badge-cmd">fdisk / parted</span> particionado</li>
            <li><span class="badge-cmd">mkfs</span> crear sistema de archivos</li>
            <li><span class="badge-cmd">mount / umount</span> montar/desmontar</li>
            <li><span class="badge-cmd">lsblk</span> listar dispositivos de bloque</li>
            <li><span class="badge-cmd">blkid</span> mostrar UUID</li>
        </ul>

        <!-- Apps de shell (filtros) -->
        <h2 class="section-title"><i class="bi bi-filter"></i> Apps de shell (filtros)</h2>
        <div class="accordion" id="accordionShell">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGrep">
                        <span class="badge-cmd me-2">grep</span> Búsqueda de patrones
                    </button>
                </h2>
                <div id="collapseGrep" class="accordion-collapse collapse show" data-bs-parent="#accordionShell">
                    <div class="accordion-body">
                        <div class="code-block">
# Uso básico
grep "patrón" archivo.txt
grep -i "patrón" archivo    # insensible
grep -v "patrón" archivo    # líneas que NO contienen
grep -r "patrón" directorio/ # recursivo
grep -l "patrón" *.txt      # solo nombres de archivo
grep -c "patrón" archivo    # contar
grep -n "patrón" archivo    # mostrar número de línea
grep -A 2 -B 2 "patrón"     # contexto
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAwk">
                        <span class="badge-cmd me-2">awk</span> Procesamiento por campos
                    </button>
                </h2>
                <div id="collapseAwk" class="accordion-collapse collapse" data-bs-parent="#accordionShell">
                    <div class="accordion-body">
                        <div class="code-block">
# Imprimir columnas
awk '{print $1}' archivo.txt
awk -F: '{print $1}' /etc/passwd   # delimitador :
awk '$3 > 100 {print $1}' archivo  # condición
awk '{sum+=$3} END {print sum}'    # suma
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSed">
                        <span class="badge-cmd me-2">sed</span> Editor de flujo
                    </button>
                </h2>
                <div id="collapseSed" class="accordion-collapse collapse" data-bs-parent="#accordionShell">
                    <div class="accordion-body">
                        <div class="code-block">
# Sustitución
sed 's/old/new/g' archivo.txt
sed -i 's/old/new/g' archivo   # in-place

# Eliminación
sed '/patrón/d' archivo.txt
sed '1,5d' archivo.txt

# Impresión selectiva
sed -n '/patrón/p' archivo.txt
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCutTr">
                        <span class="badge-cmd me-2">cut, tr, sort, uniq, wc</span>
                    </button>
                </h2>
                <div id="collapseCutTr" class="accordion-collapse collapse" data-bs-parent="#accordionShell">
                    <div class="accordion-body">
                        <div class="code-block">
# cut - extraer columnas
cut -d: -f1 /etc/passwd
cut -c1-5 archivo.txt

# tr - traducir
tr 'a-z' 'A-Z' < archivo.txt
tr -d ' ' < archivo.txt
tr -s '\n' < archivo.txt

# sort - ordenar
sort -n archivo.txt
sort -r archivo.txt
sort -k2 archivo.txt

# uniq - duplicados
uniq -c archivo.txt
sort archivo.txt | uniq

# wc - contar
wc -l archivo.txt   # líneas
wc -w               # palabras
wc -c               # bytes
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFind">
                        <span class="badge-cmd me-2">find + xargs</span>
                    </button>
                </h2>
                <div id="collapseFind" class="accordion-collapse collapse" data-bs-parent="#accordionShell">
                    <div class="accordion-body">
                        <div class="code-block">
# Buscar por nombre, tipo, tamaño
find /ruta -name "*.txt"
find /ruta -type f -size +100M
find /ruta -mtime -7

# Ejecutar comandos
find /ruta -name "*.tmp" -delete
find /ruta -name "*.txt" -exec cat {} \;
find /ruta -name "*.log" | xargs rm
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Expresiones regulares -->
        <h2 class="section-title"><i class="bi bi-regex"></i> Expresiones regulares</h2>
        <div class="row">
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">.</span> cualquier carácter</li>
                    <li><span class="badge-cmd">*</span> 0 o más veces</li>
                    <li><span class="badge-cmd">+</span> 1 o más veces (ERE)</li>
                    <li><span class="badge-cmd">?</span> 0 o 1 vez (ERE)</li>
                    <li><span class="badge-cmd">^</span> inicio de línea</li>
                    <li><span class="badge-cmd">$</span> fin de línea</li>
                    <li><span class="badge-cmd">[abc]</span> conjunto</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="command-list">
                    <li><span class="badge-cmd">[^abc]</span> negación</li>
                    <li><span class="badge-cmd">(abc|def)</span> alternancia</li>
                    <li><span class="badge-cmd">{n,m}</span> de n a m veces</li>
                    <li><span class="badge-cmd">\d</span> dígito (Perl)</li>
                    <li><span class="badge-cmd">\w</span> alfanumérico</li>
                    <li><span class="badge-cmd">\s</span> espacio</li>
                </ul>
            </div>
        </div>
        <div class="alert alert-warning">
            <i class="bi bi-lightbulb"></i> Para usar expresiones extendidas en grep: <code>grep -E</code> o <code>egrep</code>.
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const linuxMapHost = document.getElementById('linuxMindMap');
        const linuxMapSearch = document.getElementById('linuxMapSearch');
        const linuxMapExpand = document.getElementById('linuxMapExpand');
        const linuxMapCollapse = document.getElementById('linuxMapCollapse');
        const linuxMapReset = document.getElementById('linuxMapReset');

        const leafList = (items) => items.map((label) => ({ label }));

        const linuxMindMapData = {
            label: 'Linux: Comandos y Configuracion',
            children: [
                {
                    label: 'Comandos comunes de Linux',
                    children: [
                        {
                            label: 'Navegacion y archivos',
                            children: leafList([
                                'ls, cd, pwd',
                                'cp, mv, rm',
                                'mkdir, rmdir, touch',
                                'find, locate, which, whereis'
                            ])
                        },
                        {
                            label: 'Visualizacion de archivos',
                            children: leafList([
                                'cat, less, more',
                                'head, tail',
                                'nano, vim, vi',
                                'echo, printf'
                            ])
                        },
                        {
                            label: 'Procesos',
                            children: leafList([
                                'ps, top, htop',
                                'kill, killall, pkill',
                                'bg, fg, jobs',
                                'nice, renice'
                            ])
                        },
                        {
                            label: 'Sistema e informacion',
                            children: leafList([
                                'uname -a, hostname, uptime',
                                'whoami, id, date, cal',
                                'df -h, du -sh, free -h',
                                'mount, umount'
                            ])
                        },
                        {
                            label: 'Red',
                            children: leafList([
                                'ping, ip a, ip route, ss -tulnp',
                                'traceroute, nslookup, dig',
                                'curl, wget, ssh, scp, sftp'
                            ])
                        },
                        {
                            label: 'Permisos y usuarios',
                            children: leafList([
                                'chmod, chown, chgrp, umask',
                                'useradd, usermod, userdel',
                                'passwd, su, sudo, visudo, groups'
                            ])
                        },
                        {
                            label: 'Discos y particiones',
                            children: leafList([
                                'fdisk, parted, mkfs, fsck',
                                'lsblk, blkid',
                                'mount, umount'
                            ])
                        },
                        {
                            label: 'Paquetes y compresion',
                            children: leafList([
                                'apt, dpkg, yum, dnf, rpm, pacman',
                                'tar, gzip, gunzip',
                                'zip, unzip, bzip2, bunzip2'
                            ])
                        }
                    ]
                },
                {
                    label: 'Configuracion de red (ficheros)',
                    children: [
                        {
                            label: 'Interfaces',
                            children: leafList([
                                '/etc/network/interfaces',
                                '/etc/netplan/*.yaml',
                                '/etc/sysconfig/network-scripts/ifcfg-*',
                                '/etc/NetworkManager/system-connections/*'
                            ])
                        },
                        {
                            label: 'DNS y hostname',
                            children: leafList([
                                '/etc/resolv.conf',
                                '/etc/hosts',
                                '/etc/nsswitch.conf',
                                '/etc/hostname'
                            ])
                        },
                        {
                            label: 'DHCP, firewall y kernel',
                            children: leafList([
                                '/etc/dhcp/dhclient.conf',
                                '/etc/dhcp/dhcpd.conf',
                                '/etc/iptables/rules.v4, /etc/firewalld/firewalld.conf',
                                '/etc/sysctl.conf, /etc/sysctl.d/*.conf'
                            ])
                        },
                        {
                            label: 'WiFi y wrappers',
                            children: leafList([
                                '/etc/wpa_supplicant/wpa_supplicant.conf',
                                '/etc/hosts.allow',
                                '/etc/hosts.deny'
                            ])
                        }
                    ]
                },
                {
                    label: 'Permisos de usuario',
                    children: [
                        {
                            label: 'Tipos y notacion octal',
                            children: leafList([
                                'r, w, x para usuario, grupo y otros',
                                '0-7: sin permisos a rwx',
                                '755, 644, 700 como patrones comunes'
                            ])
                        },
                        {
                            label: 'Permisos especiales',
                            children: leafList([
                                'SUID (4xxx)',
                                'SGID (2xxx)',
                                'Sticky bit (1xxx)'
                            ])
                        },
                        {
                            label: 'Archivos clave',
                            children: leafList([
                                '/etc/passwd, /etc/shadow',
                                '/etc/group, /etc/gshadow',
                                '/etc/sudoers'
                            ])
                        },
                        {
                            label: 'ACL y grupos secundarios',
                            children: leafList([
                                'getfacl, setfacl',
                                'id, groups, newgrp',
                                'mount -o acl'
                            ])
                        }
                    ]
                },
                {
                    label: 'Apps de shell y regex',
                    children: [
                        {
                            label: 'grep y variantes',
                            children: leafList([
                                'grep, grep -E (egrep), grep -F (fgrep)',
                                '-i, -v, -r, -n, -c, -A/-B/-C'
                            ])
                        },
                        {
                            label: 'Procesamiento de texto',
                            children: leafList([
                                "awk '{print $1}' y awk -F:",
                                "sed 's/old/new/g' y sed -n",
                                'cut, tr'
                            ])
                        },
                        {
                            label: 'Ordenar y contar',
                            children: leafList([
                                'sort, sort -n, sort -k',
                                'uniq, uniq -c',
                                'wc -l, wc -w, wc -c'
                            ])
                        },
                        {
                            label: 'Busqueda y pipelines',
                            children: leafList([
                                'find ... -exec ...',
                                'xargs y xargs -I {}',
                                '> , >> , 2> , &> , < , | , tee'
                            ])
                        },
                        {
                            label: 'Expresiones regulares',
                            children: leafList([
                                'Basicas: . * ^ $ [] [^]',
                                'Extendidas: + ? | () {}'
                            ])
                        }
                    ]
                }
            ]
        };

        function buildLinuxMapNode(node, depth = 0) {
            const hasChildren = Array.isArray(node.children) && node.children.length > 0;

            if (hasChildren) {
                const details = document.createElement('details');
                details.className = 'linux-map-node';
                details.dataset.label = node.label.toLowerCase();
                details.dataset.depth = String(depth);
                details.open = depth < 2;

                const summary = document.createElement('summary');
                const label = document.createElement('span');
                label.className = 'linux-map-label';
                label.textContent = node.label;

                const count = document.createElement('span');
                count.className = 'linux-map-count';
                count.textContent = String(node.children.length);

                summary.appendChild(label);
                summary.appendChild(count);
                details.appendChild(summary);

                const childWrap = document.createElement('div');
                childWrap.className = 'linux-map-children';
                node.children.forEach((child) => childWrap.appendChild(buildLinuxMapNode(child, depth + 1)));
                details.appendChild(childWrap);
                return details;
            }

            const leaf = document.createElement('div');
            leaf.className = 'linux-map-leaf';
            leaf.dataset.label = node.label.toLowerCase();
            leaf.dataset.depth = String(depth);
            leaf.textContent = node.label;
            return leaf;
        }

        function forEachMapNode(callback) {
            if (!linuxMapHost) return;
            linuxMapHost.querySelectorAll('.linux-map-node, .linux-map-leaf').forEach(callback);
        }

        function resetLinuxMapView() {
            forEachMapNode((node) => {
                node.classList.remove('linux-map-hidden', 'linux-map-match');
                if (node.classList.contains('linux-map-node')) {
                    const depth = Number(node.dataset.depth || '0');
                    node.open = depth < 2;
                }
            });
        }

        function filterLinuxMapNode(node, query) {
            const label = node.dataset.label || '';
            const selfMatch = label.includes(query);
            let descendantMatch = false;

            if (node.classList.contains('linux-map-node')) {
                const childWrap = node.querySelector('.linux-map-children');
                if (childWrap) {
                    Array.from(childWrap.children).forEach((child) => {
                        if (filterLinuxMapNode(child, query)) {
                            descendantMatch = true;
                        }
                    });
                }
                if (query && descendantMatch) {
                    node.open = true;
                }
            }

            const visible = selfMatch || descendantMatch;
            node.classList.toggle('linux-map-hidden', !visible);
            node.classList.toggle('linux-map-match', Boolean(query) && selfMatch);
            return visible;
        }

        function applyLinuxMapFilter(query) {
            if (!linuxMapHost) return;
            if (!query) {
                resetLinuxMapView();
                return;
            }
            Array.from(linuxMapHost.children).forEach((rootNode) => {
                filterLinuxMapNode(rootNode, query);
            });
        }

        function initLinuxMindMap() {
            if (!linuxMapHost) return;

            linuxMapHost.innerHTML = '';
            linuxMapHost.appendChild(buildLinuxMapNode(linuxMindMapData));

            linuxMapSearch?.addEventListener('input', (event) => {
                const query = event.target.value.trim().toLowerCase();
                applyLinuxMapFilter(query);
            });

            linuxMapExpand?.addEventListener('click', () => {
                linuxMapHost.querySelectorAll('.linux-map-node').forEach((node) => {
                    node.open = true;
                });
            });

            linuxMapCollapse?.addEventListener('click', () => {
                linuxMapHost.querySelectorAll('.linux-map-node').forEach((node) => {
                    const depth = Number(node.dataset.depth || '0');
                    node.open = depth === 0;
                });
            });

            linuxMapReset?.addEventListener('click', () => {
                if (linuxMapSearch) {
                    linuxMapSearch.value = '';
                }
                resetLinuxMapView();
            });
        }

        initLinuxMindMap();
    </script>
    <script src="assets/js/site-sfx.js"></script>
    <script src="assets/js/site-theme.js"></script>
</body>
</html>



















