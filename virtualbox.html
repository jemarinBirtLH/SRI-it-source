<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VirtualBox y Debian 13 - Guía ASIR</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        :root {
            --primary-color: #0a4d68;
            --secondary-color: #088395;
            --accent-color: #05bfdb;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eef3 100%);
        }
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 2rem;
            border-radius: 0 0 20px 20px;
        }
        .section-title {
            color: var(--primary-color);
            border-bottom: 4px solid var(--accent-color);
            padding-bottom: 0.5rem;
            margin: 2rem 0;
        }
        .step-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 5px solid var(--accent-color);
        }
        .code-block {
            background: #1e1e1e;
            color: #61dafb;
            padding: 1.2rem;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
        }
        footer {
            background: var(--primary-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        .table-networks th {
            background-color: var(--primary-color);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i class="bi bi-house-door"></i> Inicio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="guia_redes.html">Redes</a></li>
                    <li class="nav-item"><a class="nav-link" href="linux_cheatsheet.html">Linux</a></li>
                    <li class="nav-item"><a class="nav-link active" href="virtualbox.html">VirtualBox</a></li>
                    <li class="nav-item"><a class="nav-link" href="conversor_binario_hexadecimal.html">Conversor</a></li>
                    <li class="nav-item"><a class="nav-link" href="MySQL.html">MySQL</a></li>
                    <li class="nav-item"><a class="nav-link" href="dhcp_dns.html">DHCP/DNS</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="hero text-center">
        <h1 class="display-4 fw-bold"><i class="bi bi-hdd-stack"></i> VirtualBox con Debian 13 (Trixie)</h1>
        <p class="lead">Aprende a crear y configurar máquinas virtuales paso a paso.</p>
    </div>

    <div class="container py-5">
        <!-- Introducción -->
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i> <strong>Debian 13 "Trixie"</strong> es la versión en desarrollo (año 2026). Los pasos son aplicables a cualquier versión de Debian.
        </div>

        <!-- 1. Instalación de VirtualBox -->
        <h2 class="section-title"><i class="bi bi-download"></i> 1. Instalación de VirtualBox</h2>
        <div class="step-card">
            <h4><span class="badge bg-primary me-2">1</span> Descargar e instalar</h4>
            <p>Descarga desde <a href="https://www.virtualbox.org/" target="_blank">virtualbox.org</a> el paquete para tu sistema operativo (Windows, Linux, macOS).</p>
            <p>En Linux (Debian/Ubuntu):</p>
            <div class="code-block">
# Añadir repositorio de VirtualBox
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/oracle-virtualbox-2016.gpg] https://download.virtualbox.org/virtualbox/debian $(lsb_release -sc) contrib" | sudo tee /etc/apt/sources.list.d/virtualbox.list
wget -O- https://www.virtualbox.org/download/oracle_vbox_2016.asc | sudo gpg --dearmor --yes --output /usr/share/keyrings/oracle-virtualbox-2016.gpg
sudo apt update
sudo apt install virtualbox-7.0
            </div>
            <p>Instalar <strong>Extension Pack</strong> (para USB 2.0/3.0, RDP, etc.)</p>
            <div class="code-block">
# Descargar e instalar
wget https://download.virtualbox.org/virtualbox/7.0.18/Oracle_VM_VirtualBox_Extension_Pack-7.0.18.vbox-extpack
sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-7.0.18.vbox-extpack
            </div>
        </div>

        <!-- 2. Crear una nueva VM -->
        <h2 class="section-title"><i class="bi bi-plus-circle"></i> 2. Crear una nueva máquina virtual</h2>
        <div class="step-card">
            <h4><span class="badge bg-primary me-2">2</span> Configuración básica</h4>
            <ul>
                <li><strong>Nombre:</strong> Debian13</li>
                <li><strong>Tipo:</strong> Linux</li>
                <li><strong>Versión:</strong> Debian (64-bit)</li>
                <li><strong>Memoria RAM:</strong> 2048 MB (mínimo 1024)</li>
                <li><strong>Disco duro:</strong> Crear disco virtual ahora → VDI → Tamaño 20 GB (dinámico)</li>
            </ul>
        </div>

        <!-- 3. Instalación de Debian 13 -->
        <h2 class="section-title"><i class="bi bi-cd"></i> 3. Instalación de Debian 13</h2>
        <div class="step-card">
            <h4><span class="badge bg-primary me-2">3</span> Insertar ISO y arrancar</h4>
            <p>Descarga la ISO de Debian 13 desde <a href="https://cdimage.debian.org/cdimage/trixie_di_alpha/" target="_blank">cdimage.debian.org</a> (versión alpha).</p>
            <p>En la VM, ve a <strong>Configuración → Almacenamiento</strong>, añade la ISO como controlador IDE.</p>
            <p>Arranca la VM y sigue el instalador (modo texto o gráfico).</p>
            <h5 class="mt-3">Particionado recomendado:</h5>
            <ul>
                <li>/boot : 1 GB</li>
                <li>/ : 15 GB (ext4)</li>
                <li>swap : 2 GB</li>
                <li>/home : resto (opcional)</li>
            </ul>
        </div>

        <!-- 4. Configuración de red en VirtualBox (DETALLADA) -->
        <h2 class="section-title"><i class="bi bi-wifi"></i> 4. Configuración de red en VirtualBox</h2>
        <div class="step-card">
            <p>VirtualBox ofrece varios modos de red que determinan cómo la máquina virtual (MV) se comunica con el anfitrión, otras MVs y el exterior. Elegir el modo adecuado es clave para cada escenario.</p>
            
            <h4 class="mt-4">Tabla comparativa de modos de red</h4>
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-networks">
                    <thead>
                        <tr>
                            <th>Modo</th>
                            <th>MV → Anfitrión</th>
                            <th>Anfitrión → MV</th>
                            <th>MV ↔ MV</th>
                            <th>MV → Exterior</th>
                            <th>Exterior → MV</th>
                            <th>Uso típico</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>NAT</strong></td>
                            <td>✅ Sí</td>
                            <td>❌ No (por defecto)</td>
                            <td>❌ No</td>
                            <td>✅ Sí</td>
                            <td>❌ No</td>
                            <td>Por defecto. Solo salida a Internet.</td>
                        </tr>
                        <tr>
                            <td><strong>Red NAT</strong></td>
                            <td>✅ Sí</td>
                            <td>❌ No (por defecto)</td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>❌ No</td>
                            <td>Varias MVs comparten red y salida a Internet.</td>
                        </tr>
                        <tr>
                            <td><strong>Adaptador puente</strong></td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>La MV es un equipo más en la LAN.</td>
                        </tr>
                        <tr>
                            <td><strong>Solo anfitrión</strong></td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>✅ Sí</td>
                            <td>❌ No</td>
                            <td>❌ No</td>
                            <td>Red privada solo con el anfitrión.</td>
                        </tr>
                        <tr>
                            <td><strong>Red interna</strong></td>
                            <td>❌ No</td>
                            <td>❌ No</td>
                            <td>✅ Sí</td>
                            <td>❌ No</td>
                            <td>❌ No</td>
                            <td>Aislamiento total entre MVs.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4 class="mt-4">Descripción detallada de cada modo</h4>
            <div class="row">
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5><i class="bi bi-globe text-primary"></i> NAT (Predeterminado)</h5>
                            <p>La MV comparte la IP del anfitrión para salir a Internet. No es accesible desde la red local. Útil para navegación y actualizaciones.</p>
                            <p><strong>Redirección de puertos:</strong> Para acceder a servicios de la MV (SSH, web) desde el anfitrión, configura reenvío de puertos en <em>Red → Avanzadas → Reenvío de puertos</em>.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5><i class="bi bi-shuffle text-primary"></i> Red NAT</h5>
                            <p>Crea una red privada entre MVs que también tiene salida a Internet mediante NAT. Configurable en <em>Archivo → Preferencias → Red → Redes NAT</em>. Ideal para laboratorios con varias MVs.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5><i class="bi bi-bridge text-primary"></i> Adaptador puente (Bridged)</h5>
                            <p>La MV obtiene una IP en la misma red física que el anfitrión, como si fuera un equipo más. Perfecto para servidores que deben ser accesibles desde la LAN.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5><i class="bi bi-diagram-3 text-primary"></i> Solo anfitrión (Host-only)</h5>
                            <p>Red privada entre el anfitrión y las MVs. No hay acceso a Internet. Útil para transferencia de archivos o pruebas aisladas.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5><i class="bi bi-layers text-primary"></i> Red interna</h5>
                            <p>Las MVs se comunican solo entre sí (mismo nombre de red). Ni siquiera el anfitrión tiene acceso. Máximo aislamiento.</p>
                        </div>
                    </div>
                </div>
            </div>

            <h4 class="mt-4">Cómo ver y cambiar la configuración de red en VirtualBox</h4>
            <ol>
                <li>Abre el <strong>Administrador de VirtualBox</strong>.</li>
                <li>Selecciona la MV y haz clic en <strong>Configuración</strong>.</li>
                <li>Ve a la pestaña <strong>Red</strong>.</li>
                <li>Verás hasta 4 adaptadores. Activa los que necesites y elige el modo en <strong>"Conectado a"</strong>.</li>
                <li>Para opciones avanzadas (MAC, cable conectado, redirección de puertos), despliega <strong>"Avanzadas"</strong>.</li>
            </ol>
            <p><strong>Nota:</strong> Puedes tener múltiples adaptadores con distintos modos (ej. NAT para Internet + Host-only para comunicación con anfitrión).</p>
        </div>

        <!-- 5. Configuración de red dentro de Debian 13 (ampliada) -->
        <h2 class="section-title"><i class="bi bi-gear"></i> 5. Configuración de red en Debian 13</h2>
        <div class="step-card">
            <p>Una vez elegido el modo de red en VirtualBox, hay que configurar la interfaz dentro de la MV. Dependiendo de si queremos IP por DHCP o estática, los archivos cambian.</p>
            
            <h5>Identificar la interfaz</h5>
            <p>Ejecuta <code>ip link</code> o <code>ip a</code> para ver el nombre de la interfaz (normalmente <code>enp0s3</code> para el primer adaptador).</p>

            <h5 class="mt-3">Configuración con DHCP (automática)</h5>
            <p>Para la mayoría de modos (NAT, Red NAT, puente), DHCP funciona sin problemas. En Debian 12+ se recomienda <strong>systemd-networkd</strong>:</p>
            <div class="code-block">
# Habilitar systemd-networkd (si no está activo)
sudo systemctl enable systemd-networkd
sudo systemctl start systemd-networkd

# Crear archivo de configuración
sudo nano /etc/systemd/network/10-enp0s3.network
[Match]
Name=enp0s3
[Network]
DHCP=yes
            </div>
            <p>Reinicia el servicio: <code>sudo systemctl restart systemd-networkd</code></p>

            <h5 class="mt-3">Configuración con IP estática</h5>
            <p>Útil en modos como Host-only o Red interna. Ejemplo para red Host-only (suele usar la subred 192.168.56.0/24):</p>
            <div class="code-block">
# /etc/systemd/network/10-enp0s3.network
[Match]
Name=enp0s3
[Network]
Address=192.168.56.10/24
# Opcional: gateway si hay salida (en Host-only no suele haber)
# Gateway=192.168.56.1
DNS=8.8.8.8
            </div>
            <p>Para Bridged con estática, usa una IP libre de tu LAN, el gateway de tu router y DNS adecuados.</p>

            <h5 class="mt-3">Método alternativo: /etc/network/interfaces</h5>
            <p>Si prefieres el método clásico (ifupdown), instala <code>ifupdown</code> y edita:</p>
            <div class="code-block">
# /etc/network/interfaces
auto enp0s3
iface enp0s3 inet dhcp   # Para DHCP

# Para estática
auto enp0s3
iface enp0s3 inet static
    address 192.168.56.10
    netmask 255.255.255.0
    gateway 192.168.56.1
            </div>
            <p>Luego reinicia la red: <code>sudo systemctl restart networking</code></p>
        </div>

        <!-- 6. Comandos útiles de VBoxManage -->
        <h2 class="section-title"><i class="bi bi-terminal"></i> 6. Comandos VBoxManage útiles</h2>
        <div class="step-card">
            <div class="code-block">
# Listar VMs
VBoxManage list vms

# Iniciar VM en modo headless (sin interfaz)
VBoxManage startvm "Debian13" --type headless

# Apagar VM
VBoxManage controlvm "Debian13" poweroff

# Crear snapshot
VBoxManage snapshot "Debian13" take "Después de instalación"

# Restaurar snapshot
VBoxManage snapshot "Debian13" restore "Después de instalación"

# Modificar red de una VM en caliente (mientras está apagada)
VBoxManage modifyvm "Debian13" --nic1 nat
VBoxManage modifyvm "Debian13" --nic1 bridged --bridgeadapter1 "eth0"

# Clonar VM
VBoxManage clonevm "Debian13" --name "Debian13-clon" --register
            </div>
        </div>

        <!-- 7. Ejemplo completo: laboratorio con dos Debian -->
        <h2 class="section-title"><i class="bi bi-layers"></i> 7. Ejemplo: laboratorio con dos Debian en red interna</h2>
        <div class="step-card">
            <ol>
                <li>Crea dos VMs: <strong>Servidor</strong> y <strong>Cliente</strong>.</li>
                <li>En ambas, configura una <strong>red interna</strong> (ej. "intranet") en el adaptador 1.</li>
                <li>En el Servidor, asigna IP estática 192.168.100.1/24.</li>
                <li>En el Cliente, asigna IP estática 192.168.100.2/24.</li>
                <li>Verifica conectividad con <code>ping</code>.</li>
            </ol>
            <p><strong>Configuración en Servidor (systemd-networkd):</strong></p>
            <div class="code-block">
# /etc/systemd/network/10-enp0s3.network
[Match]
Name=enp0s3
[Network]
Address=192.168.100.1/24
            </div>
            <p><strong>Configuración en Cliente:</strong></p>
            <div class="code-block">
[Match]
Name=enp0s3
[Network]
Address=192.168.100.2/24
            </div>
            <p>Reinicia systemd-networkd en ambas: <code>sudo systemctl restart systemd-networkd</code></p>
            <p>Para comprobar: <code>ping 192.168.100.2</code> desde el servidor.</p>
        </div>

        <!-- 8. Snapshots y clonación -->
        <h2 class="section-title"><i class="bi bi-camera"></i> 8. Snapshots y clonación</h2>
        <div class="step-card">
            <p>Antes de hacer cambios importantes, crea un snapshot desde la interfaz gráfica o con:</p>
            <div class="code-block">VBoxManage snapshot "Debian13" take "Antes de instalar LAMP"</div>
            <p>Para clonar una VM (útil para laboratorios):</p>
            <div class="code-block">VBoxManage clonevm "Debian13" --name "Debian13-copia" --register --mode machine</div>
            <p>Opciones: <code>--mode all</code> (clona discos), <code>--mode machine</code> (solo configuración).</p>
        </div>
    </div>

    <footer>
        <p>Created by Jemarin Birt LH ASIR 2025 ^^</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>